# 生产者

## 客户端 启动流程

> 在生成者启动的过程中主要流程包含以下

1. 检查配置:主要是分组名称非空及名称规则的校验
2. 注册并创建org.apache.rocketmq.client.impl.factory.MQClientInstance实例
MQClientInstance在构建的过程中包含了一下的实例信息处理,配置ClientConfig，创建nettyClientConfig,MQAdminImpl,PullMessageService,RebalanceService,DefaultMQProducer,ConsumerStatsManager这些主要核心类
3. 初始化topic名称及TopicPublishInfo的映射关系
4. 最主要的部分是MQClientInstance启动流程:其中包含了对一下类的启动;首先通过指定的nameServer更新MQClientInstance集群的NameServer地址
5. 调用MQClientInstance.start 方法启动netty客户端并且定时扫描移除超时废弃的请求信息。
6. 定时线程任务。例如更新NameServer信息,更新topic及topic路由信息,对所有的broker发送心跳。根据消息多少，动态管理线程池,但是被注释了,空实现。可能在启动的时候已经指定的核心线程池大小及最大值，这样的调整没什么意义吧 
7. Pull Servier服务启动,通过不断的轮训队列获取队列头部的获取PullRequest,通过调用MQClientInstance.selectConsumer 方法获取拉取消息的实现
8. 拉取消息